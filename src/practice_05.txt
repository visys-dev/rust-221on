Радий, що все працює! Давай докладніше розглянемо, як обчислюються діагоналі в прямокутнику і чому ми застосовуємо лінійне масштабування.

### Проблема з нерівними діагоналями

Для квадратного прямокутника (де ширина і висота однакові) діагоналі виглядають як звичайні лінії, які йдуть від одного кута до іншого:

- **Головна діагональ** йде з верхнього лівого кута до нижнього правого.
- **Другорядна діагональ** йде з верхнього правого кута до нижнього лівого.

Це просто для квадратів, бо одна координата відповідає іншій: якщо ми йдемо по горизонталі (x), то на кожен крок по x ми робимо рівно такий же крок по вертикалі (y).

Але коли прямокутник не є квадратом, наприклад, коли ширина (W) більша або менша за висоту (H), діагоналі виглядають нерівними. Щоб зробити діагоналі рівними, нам потрібно "масштабувати" кількість кроків по горизонталі так, щоб діагональ залишалася пропорційною.

### Як працює масштабування

Щоб намалювати діагоналі правильно, ми застосовуємо лінійне масштабування, тобто враховуємо різницю в пропорціях між шириною і висотою.

#### Головна діагональ (з верхнього лівого до нижнього правого):

Кожен крок по осі \( y \) відповідає певній кількості кроків по осі \( x \). Це можна уявити як дробовий крок по осі \( x \) на кожен крок по осі \( y \). Враховуючи, що діагональ має пройти через всю ширину (від 0 до \( W-1 \)) і всю висоту (від 0 до \( H-1 \)), для кожного рядка \( y \) ми маємо масштабувати \( x \), щоб це відображало різницю у розмірах сторін:

\[
x = \frac{y \times W}{H}
\]

Це рівняння означає, що кожне значення \( y \) масштабується так, щоб відповідати пропорції між шириною \( W \) і висотою \( H \). Таким чином, коли \( y \) доходить до \( H-1 \), \( x \) буде дорівнювати \( W-1 \).

#### Другорядна діагональ (з верхнього правого до нижнього лівого):

Тут ситуація аналогічна, тільки ми йдемо в протилежний бік. Тобто, коли \( y = 0 \), \( x \) повинно бути \( W-1 \), а коли \( y = H-1 \), \( x \) повинно бути 0. Це можна описати так:

\[
x = \frac{(H - 1 - y) \times W}{H}
\]

Тут \( H - 1 - y \) забезпечує зворотний рух по осі \( y \), коли ми малюємо другу діагональ.

### Як це працює на практиці:

1. Для кожного значення \( y \), формула визначає відповідне \( x \), яке відповідає діагоналі.
2. Для головної діагоналі \( x = \frac{y \times W}{H} \), тому для кожного \( y \) від 0 до \( H-1 \), \( x \) проходить від 0 до \( W-1 \), відповідно до пропорцій сторін.
3. Для другорядної діагоналі \( x = \frac{(H - 1 - y) \times W}{H} \), де \( x \) зменшується від \( W-1 \) до 0 у зворотному напрямку.

### Висновок:

Масштабування дозволяє нам "розтягнути" діагоналі так, щоб вони виглядали правильно навіть у прямокутнику з нерівними сторонами. Основна ідея полягає в тому, щоб координату по горизонталі \( x \) масштабувати відповідно до співвідношення ширини до висоти прямокутника.